<!--
 Round corner, 3D buttons
-->

<script>
  import colors from "$lib/storage/color_palette.json"
  import { tweened } from "svelte/motion";

  /* Using color theme to set colors */
  export let color_theme = colors.button.type_blue;
  /* Text on the button */
  export let text_val;
  /* Color of the button in Hex color code*/
  export let color = color_theme.base;
  /* Color of the button when a mouse hovers above*/
  export let color_on_hover = color_theme.hover;
  /* Color of the outline */
  export let outline_color = color_theme.border;
  /* Color of the text */
  export let text_color = color_theme.text;
  /* Font Family */
  export let font = color_theme.font;
  /* Size of the button */
  export let text_size;
  /* If disable */
  export let enable = true;
  /* On click function*/
  export let react = () => {};
 
  let _color = color;
  let _opacity = 1;
  let _border = tweened(4, {
    duration: 50,
  });

  if (!enable) {
    _opacity = 0.5;
  }
</script>

<div>
<div id="anchor">
  <!-- style in <style> can not be updated as a variable -->
  <button
    style="
      --font: {font};
      --text_size: {text_size};
      --outline_color: {outline_color};
      --_color: {_color};
      --_border: {$_border + 'px'};
      --_opacity: {_opacity};
    "

    on:focus={() => {}}
    on:click={react}
    on:mouseenter={() => {
      if (!enable) return;
      _border.set(1);
      _color = color_on_hover;
    }}
    on:mouseleave={() => {
      if (!enable) return;
      _border.set(4);
      _color = color;
    }}
  >
    
    <p
      style="--text_color: {text_color}"
    >
      {text_val}
    </p>
  
  </button>
</div>
</div>
<style>

div {
  background-color: green;
}

#anchor {
  width: 10px;
  height: 10px;
  background-color: red;
  overflow: visible;
  display: inline;
}

button {
  position: relative;
  font-family: var(--font);
  font-size: var(--text_size);
  background-color: var(--_color);
  border-radius: 20px;
  border-style: solid;
  border-width: 1px;
  border-color: var(--outline_color);
  border-right-width: var(--_border);
  border-bottom-width: var(--_border);
  right: var(--_border);
  bottom: var(--_border);
  opacity: var(--_opacity);
}

p {
  color: var(--text_color);
  margin: 6px;
  padding: 6px;
}

</style>
